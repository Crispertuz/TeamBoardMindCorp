<div>
  <div class="row">
    <div
      class="selectUser"
      *ngIf="_userServiceIsAdmin.loggedIn() && _userServiceIsAdmin.isAdmin()"
    >
      <mat-form-field appearance="fill">
        <mat-label>Select user</mat-label>
        <select matNativeControl required [(ngModel)]="opcionSeleccionada">
          <option *ngFor="let item of userData" value="{{ item.email }}">
            {{ item.email }}
          </option>
        </select>
        <button
          (click)="listUserStoryAdmin()"
          class="button btnList"
          mat-raised-button
        >
          List
        </button>
      </mat-form-field>
    </div>

    <div class="example-container col">
      <h2>Active</h2>

      <div>
        <div class="form" *ngFor="let data of storyActive; index as i">
          <mat-card class="card">
            <mat-icon (click)="data.acordion = !data.acordion"
              >keyboard_arrow_down</mat-icon
            >
            <mat-card-title>{{ data.name }}</mat-card-title>
            <mat-card-content>
              <div
                class="container"
                [ngClass]="{ 'display-none': !data.acordion }"
              >
                <mat-card-actions *ngIf="_userServiceIsAdmin.isAdmin()">
                  <mat-icon color="primary" (click)="deleteStory(data)"
                    >delete</mat-icon
                  >
                </mat-card-actions>
                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <select
                    matNativeControl
                    required
                    [(ngModel)]="userStoryStatus[i]"
                  >
                    <option value="active">Active</option>
                    <option value="verified QA">Verified QA</option>
                    <option value="ready for PO">Ready for PO</option>
                    <option value="resolved">Resolved</option>
                  </select>
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="Description"
                    required
                    disabled
                  />{{ data.description }}
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="Description"
                    required
                    disabled
                  />{{ data.userEmail }}
                </mat-form-field>

                <mat-label>BUGS</mat-label>
                <mat-label>
                  <ul *ngFor="let bug of bugArray(data); index as i">
                    <li>
                      {{ data.bugs[i] }}
                    </li>
                  </ul>
                </mat-label>

                <mat-form-field>
                  <input
                    matInput
                    placeholder="Register Bugs"
                    required
                    [(ngModel)]="userStoryBugs[i]"
                  />
                </mat-form-field>

                <mat-card-actions>
                  <button
                    (click)="updateStory(data, i)"
                    class="button"
                    mat-raised-button
                  >
                    Update
                  </button>
                </mat-card-actions>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="example-container col">
      <h2>Verified QA</h2>

      <div>
        <div class="form" *ngFor="let data of storyVerifiedQa; index as i">
          <mat-card class="card">
            <mat-icon (click)="data.acordion = !data.acordion"
              >keyboard_arrow_down</mat-icon
            >
            <mat-card-title>{{ data.name }}</mat-card-title>
            <mat-card-content>
              <div
                class="container"
                [ngClass]="{ 'display-none': !data.acordion }"
              >
                <mat-card-actions *ngIf="_userServiceIsAdmin.isAdmin()">
                  <mat-icon color="primary" (click)="deleteStory(data)"
                    >delete</mat-icon
                  >
                </mat-card-actions>
                <mat-form-field appearance="fill">
                  <mat-label>User</mat-label>
                  <select matNativeControl required disabled>
                    <option
                      *ngFor="let item of userData"
                      value="{{ item.email }}"
                    >
                      <b>
                        {{ item.email }}
                      </b>
                    </option>
                  </select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <select
                    matNativeControl
                    required
                    [(ngModel)]="userStoryStatus[i]"
                  >
                    <option value="active">Active</option>
                    <option value="resolved">Resolved</option>
                    <option value="verified QA">Verified QA</option>
                    <option value="ready for PO">Ready for PO</option>
                    <option value="closed">Closed</option>
                  </select>
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="Description"
                    required
                    disabled
                  />{{ data.description }}
                </mat-form-field>
                <mat-label>BUGS</mat-label>
                <mat-label>
                  <ul *ngFor="let bug of bugArray(data); index as i">
                    <li>
                      {{ data.bugs[i] }}
                    </li>
                  </ul>
                </mat-label>

                <mat-form-field>
                  <input
                    matInput
                    placeholder="Register Bugs"
                    required
                    [(ngModel)]="userStoryBugs[i]"
                  />
                </mat-form-field>
                <mat-card-actions>
                  <button
                    (click)="updateStory(data, i)"
                    class="button"
                    mat-raised-button
                  >
                    Update
                  </button>
                </mat-card-actions>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="example-container col">
      <h2>Ready for PO</h2>

      <div>
        <div class="form" *ngFor="let data of storyReadyForPo; index as i">
          <mat-card class="card">
            <mat-icon (click)="data.acordion = !data.acordion"
              >keyboard_arrow_down</mat-icon
            >
            <mat-card-title>{{ data.name }}</mat-card-title>
            <mat-card-content>
              <div
                class="container"
                [ngClass]="{ 'display-none': !data.acordion }"
              >
                <mat-card-actions *ngIf="_userServiceIsAdmin.isAdmin()">
                  <mat-icon color="primary" (click)="deleteStory(data)"
                    >delete</mat-icon
                  >
                </mat-card-actions>
                <mat-form-field appearance="fill">
                  <mat-label>User</mat-label>
                  <select matNativeControl required disabled>
                    <option
                      *ngFor="let item of userData"
                      value="{{ item.email }}"
                    >
                      <b>
                        {{ item.email }}
                      </b>
                    </option>
                  </select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <select
                    matNativeControl
                    required
                    [(ngModel)]="userStoryStatus[i]"
                  >
                    <option value="active">Active</option>
                    <option value="resolved">Resolved</option>
                    <option value="verified QA">Verified QA</option>
                    <option value="ready for PO">Ready for PO</option>
                    <option value="closed">Closed</option>
                  </select>
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="Description"
                    required
                    disabled
                  />{{ data.description }}
                </mat-form-field>
                <mat-label>BUGS</mat-label>
                <mat-label>
                  <ul *ngFor="let bug of bugArray(data); index as i">
                    <li>
                      {{ data.bugs[i] }}
                    </li>
                  </ul>
                </mat-label>

                <mat-form-field>
                  <input
                    matInput
                    placeholder="Register Bugs"
                    required
                    [(ngModel)]="userStoryBugs[i]"
                  />
                </mat-form-field>
                <mat-card-actions>
                  <button
                    (click)="updateStory(data, i)"
                    class="button"
                    mat-raised-button
                  >
                    Update
                  </button>
                </mat-card-actions>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="example-container col">
      <h2>Resolved</h2>

      <div>
        <div class="form" *ngFor="let data of storyResolved; index as i">
          <mat-card class="card">
            <mat-icon (click)="data.acordion = !data.acordion"
              >keyboard_arrow_down</mat-icon
            >
            <mat-card-title>{{ data.name }}</mat-card-title>
            <mat-card-content>
              <div
                class="container"
                [ngClass]="{ 'display-none': !data.acordion }"
              >
                <mat-card-actions *ngIf="_userServiceIsAdmin.isAdmin()">
                  <mat-icon color="primary" (click)="deleteStory(data)"
                    >delete</mat-icon
                  >
                </mat-card-actions>
                <mat-form-field appearance="fill">
                  <mat-label>User</mat-label>
                  <select matNativeControl required disabled>
                    <option
                      *ngFor="let item of userData"
                      value="{{ item.email }}"
                    >
                      <b>
                        {{ item.email }}
                      </b>
                    </option>
                  </select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <select
                    matNativeControl
                    required
                    [(ngModel)]="userStoryStatus[i]"
                  >
                    <option value="active">Active</option>
                    <option value="resolved">Resolved</option>
                    <option value="verified QA">Verified QA</option>
                    <option value="ready for PO">Ready for PO</option>
                    <option value="closed">Closed</option>
                  </select>
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="Description"
                    required
                    disabled
                  />{{ data.description }}
                </mat-form-field>
                <mat-label>BUGS</mat-label>
                <mat-label>
                  <ul *ngFor="let bug of bugArray(data); index as i">
                    <li>
                      {{ data.bugs[i] }}
                    </li>
                  </ul>
                </mat-label>

                <mat-form-field>
                  <input
                    matInput
                    placeholder="Register Bugs"
                    required
                    [(ngModel)]="userStoryBugs[i]"
                  />
                </mat-form-field>
                <mat-card-actions>
                  <button
                    (click)="updateStory(data, i)"
                    class="button"
                    mat-raised-button
                  >
                    Update
                  </button>
                </mat-card-actions>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
